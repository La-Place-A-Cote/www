{{ define "main" }}

{{/*  <div class="alert alert-info alert-dismissible fade show" role="alert">
  La réservation sur TheFork ne permet de réserver que pour le Restaurant La Place. Pour réserver à la pizzeria, veuillez contacter le numéro de la Pizzeria.
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>  */}}
<!-- Slider  -->
<!--  FIXME:  Better picture for slider BeFunky for picture to painting or else  -->
{{ with .Params.slider }}
{{ if .enable }}

<section>
  <div class="swiper carouselSwiper">
    <div class="swiper-wrapper">
      {{ range $index, $val := .images }}
        <div class="swiper-slide")>
          {{ with .image }}<div class="swiper-bg" style="background-image: url('{{ . | relURL }}')"></div>{{ end }}  
          {{ $colortitre:= .titreColor | default "#fff"}}
          {{ $colortexte:= .texteColor | default "#fff"}}
          {{ with .titre  }}<h1 class="swipertitre" style="color: {{ $colortitre }};" >{{ . | markdownify }}</h1>{{ end }}
          {{ with .texte  }}<p class="swipertext" style="color: {{ $colortexte }};">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
    </div>
    <div class="swiper-pagination"></div>
  </div>
</section>
{{ end }}
{{ end }}
<!-- /Slider -->

<!-- The Fork  -->
{{ with .Params.fork }}
{{ if .enable }}
<section class="thefork">
  <div class="tf-floating-button"><a class="tf-widget-link" href="https://www.thefork.fr/restaurant/la-place-villecroze-r498349" target="_blank" rel="noopener">Réserver une table</a><img class="tf-button-icon" src="https://static.myfourchette.com/uploads/email_campaign/56567_IsotypeTheForkGreenSm.png"></div>
</section>
{{ end }}
{{ end }}
<!-- /The Fork -->

<!-- about -->
{{ with .Params.about }}
{{ if .enable }}
<section class="about section">
  <div data-aos="zoom-in-down" class="container">
    <div class="row">
      <div class="{{ if ( or .image_enable) }}col-md-7{{ end }} col-sm-12">
        <div class="block">
          <div class="section-title text-center">
            {{ with .title }}<h2>{{ . | markdownify }}</h2>{{ end }}
          </div style="color: black;">
          {{ with .description }}{{ . | markdownify }}{{ end }}
        </div>
      </div>
      <div class="col-md-5 col-sm-12 video">
        <div class="block" style="display: grid;place-items: center;">
          {{ if .image_enable }}
          <img src="{{ .image | relURL }}" class="img-fluid" alt="Img">
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
<!-- /about -->

<!-- Event  -->
{{ with .Params.event }}
{{ if .enable }}
{{ $.Scratch.Set "counter" 0 }}
{{ range sort .evenements }}
{{ $t := (time .date) }}
{{ if $t.After now }}
{{ $.Scratch.Set "counter" (add ($.Scratch.Get "counter") 1) }}
{{ end }}
{{ end }}
{{ $count := $.Scratch.Get "counter"}}
{{ if gt $count 0}}
<section>
  <h1 style="text-align: center; margin-bottom: 4rem;margin-top: 4rem;">{{ .titre | markdownify }}</h1>
  <div data-aos="zoom-in-down" class="wrapper">  
    <div class="swiper news-slider">
      <div class="news-slider__wrp swiper-wrapper">
        {{ range sort .evenements ".date" }}
        {{ $t := (time .date) }}
        {{ if $t.After now }}
        <div class=" news-slider__item {{if le $count 2}} bignews {{ end }} swiper-slide ">
          {{ with .nom }}<a  href="{{ `author/` | relLangURL }}{{ . | urlize }}" class="news__item {{if le $count 2}} big-flex {{ end }}">{{ end }}
            <div class="textcontainer">
              <div class="news-date">
                {{ with .date }} <span class="news-date__title">{{ time.Format ":date_long" . }}</span>{{ end }}
              </div>
              <div class="news__title">
                {{ .titre }}
              </div>
              <div class="news__nom">
                {{ .nom }}
              </div>
              <p class="news__txt">
                {{ .texte }}
              </p>
            </div>
            <div class="news__img">
              <img src="{{ .image | relURL }}" alt="news">
            </div>
          </a>
        </div>
        {{ end }}
        {{ end }}
      </div>
      
      <div class="news-slider__ctr">
  
        <div class="news-slider__arrows">
          <button class="news-slider__arrow news-slider-prev">
            <span class="icon-font">
              <svg class="icon icon-arrow-left"><use xlink:href="#icon-arrow-left"></use></svg>
            </span>
          </button>
          <button class="news-slider__arrow news-slider-next">
            <span class="icon-font">
              <svg class="icon icon-arrow-right"><use xlink:href="#icon-arrow-right"></use></svg>
            </span>
          </button>
        </div>
  
        <div class="news-slider__pagination"></div>
  
      </div>
  
    </div>
  
  </div>
  
</section>
{{ end }}
{{ end }}
{{ end }}
<!-- /Event  -->

<!-- Food Menu  -->
<!--  TODO:  Remake Menu to be more user Friendly   -->
{{ with .Params.food }}
{{ if .enable }}
<section id="price" class="price section">
  <div data-aos="zoom-in-down" class="container">
    <div style="text-align: center; margin-bottom: 1rem;">
      <h1>{{ .titre | markdownify }}</h1>
      <div class="d-flex justify-content-center">
        <button type="button" id="BtnFR" class="btn  m-1"><img class="lang" src="/images/flag/france.png" alt="FR"></button>
        <button type="button" id="BtnEN" class="btn  m-1"><img class="lang" src="/images/flag/anglais.png" alt="EN"></button>
      </div>
    </div>
    {{ range $index, $val := .menus }}
    <div class="col-12 text-center  mb-5">
      <div class="btn-group btn-group-toggle " data-toggle="buttons">
        <input type="radio" name="shuffle-filter" class="btn-check" id="btn-check" value="all" checked="checked">
        <label class="btn btn-secondary"  for="btn-check">
          All
        </label>

        {{ range $index, $val := .sous_menus }}
          
          <input type="radio" name="shuffle-filter" value="{{ .nom_fr }}" class="btn-check" id="btn-check-{{ $index }}" >
          <label class="btn btn-secondary"  for="btn-check-{{ $index }}"><span class="fr "></span>{{ .nom_fr | markdownify }}</span><span class="en">{{ .nom_en | markdownify }}</span></label>
        {{ end }}
        
      </div>
    </div>
    <div class="row shuffle-wrapper food-gallery shuffle " style="position: relative; overflow: hidden; transition: height 250ms cubic-bezier(0.4, 0, 0.2, 1) 0s;">
      {{ range .sous_menus }}
      {{ $filter :=  .nom_fr  }}
        {{ range .pricing_item }}
        {{ if .enable }}
          <div class="col-lg-6 col-md-6 mb-4 shuffle-item shuffle-item--visible" data-groups="[ &quot;{{ $filter }}&quot;]" style="position: absolute; top: 0px; left: 0px; visibility: visible; will-change: transform; opacity: 1; transition-duration: 250ms; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-property: transform, opacity;width: 49%">
            <div class="menu-item position-relative ">
              <div class="d-flex align-items-center">
                {{ if .img_enable }}
                <img src="{{ .img }}" alt="{{ .titre_fr }}" class="img-thumbnail-menu ">
                {{ end }}
                <div class="">
                  <h4 class=" fr">{{.titre_fr}} - <span>{{.prix}}</span></h4>
                  <h4 class=" en">{{.titre_en}} - <span>{{.prix}}</span></h4>
                  <p class="fr">{{ .description_fr }}</p>
                  <p class="en">{{ .description_en }}</p>
                </div>
              </div>
            </div>
          </div>
        {{ end }}
        {{ end }}
      {{ end }}
      {{ end }}
    </div>
	</div>
</section><!-- #price close -->
{{ end }}
{{ end }}
<!-- /Food Menu  -->

<!-- Insta  -->
{{ with .Params.insta }}
{{ if .enable }}
<section style="margin-bottom: 50px;">
  <div class="container">
		<div class="row" >
			<div class="col-md-12 " >
        <h1 style="text-align: center; margin-bottom: 4rem;">{{ .titre | markdownify }}</h1>
        <div data-behold-id="{{ .id }}"></div>
        <script src="https://widgets.behold.so/ig.js" defer></script>
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
<!-- /Insta  -->

{{ end }}

